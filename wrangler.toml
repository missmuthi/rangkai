# Wrangler configuration for Rangkai
# This file is used for local development with `wrangler pages dev`
# Production bindings are configured in Cloudflare Dashboard

name = "rangkai"
compatibility_date = "2025-04-25"
compatibility_flags = ["nodejs_compat"]

# Pages configuration
pages_build_output_dir = "dist"

# ============================================
# LOCAL DEVELOPMENT BINDINGS
# ============================================
# These are used when running `wrangler pages dev dist`
# For production, configure bindings in Cloudflare Dashboard

# D1 Database (local SQLite for development)
[[d1_databases]]
binding = "DB"
database_name = "rangkai-db"
database_id = "local"  # Replace with actual ID for remote dev

# KV Namespaces (local emulation)
[[kv_namespaces]]
binding = "KV"
id = "local-kv"  # Replace with actual ID for remote dev

[[kv_namespaces]]
binding = "CACHE"
id = "local-cache"  # Replace with actual ID for remote dev

# R2 Bucket (local emulation)
[[r2_buckets]]
binding = "BLOB"
bucket_name = "rangkai-blob"

# ============================================
# ENVIRONMENT-SPECIFIC CONFIGURATION
# ============================================

# Production environment (main branch)
[env.production]
# Bindings are configured in Cloudflare Dashboard for production

# Preview/Staging environment
[env.preview]
# Bindings are configured in Cloudflare Dashboard for preview

# ============================================
# NOTES
# ============================================
# 
# For NuxtHub projects, most configuration is handled by:
# 1. nuxt.config.ts -> hub: { database: true, kv: true, blob: true }
# 2. Cloudflare Dashboard -> Pages -> Settings -> Bindings
#
# This file is primarily for:
# - Local development with `wrangler pages dev`
# - CI/CD with `wrangler pages deploy`
# - Documenting the expected bindings
#
# Required Cloudflare Dashboard Configuration:
# - D1 Database binding: DB
# - KV Namespace binding: KV (for app data)
# - KV Namespace binding: CACHE (for caching)
# - R2 Bucket binding: BLOB
# - Compatibility flag: nodejs_compat
